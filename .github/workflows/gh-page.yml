name: "GitHub Page"
on: push
permissions:
  contents: write # Able to push to master like you want
jobs:
  build_and_updateDocs:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v3
      
      - name: SetUp NodeJs
        uses: actions/setup-node@v3
        with: 
          node-version: 18

      - name: Change Working Directory
        run: |
             cd ghis
             ls

      - name: Install Dependencies
        run: |
             cd ghis
             ls
             npm install

      - name: Build in Production
        run: |
             cd ghis
             ls
             npm run build:prod
        
      - name: Archive Production Artifacts
        uses: actions/upload-artifact@v3
        with:
          name: dist
          path: ghis/dist

      - name: Refresh Docs Folder(using  PUSH)
        env: 
          CI_COMMIT_MESSAGE: CI Build Artifacts Only Docs
          CI_COMMIT_AUTHOR: Continuous Integration(CI)
        run : |
              date > generated.txt
              cp -R ghis/dist docs
              git config user.name Ghislain1
              git config user.email gzeleu@outlook.de   
              git add .      
              git commit  -m "${{ env.CI_COMMIT_MESSAGE }}"
              git push
 

            
        

